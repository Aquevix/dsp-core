<div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading resource-header"><strong>Manage Schema</strong>

        <div id="app-buttons" class="btn-group btn-group-sm pull-right">

            <button ng-click="showJSON()" class="btn btn-default">
                <span class="icon-upload-alt"></span>
                Import JSON Schema
            </button>
            <button ng-click="showForm()" class="btn btn-default">
                <span class="icon-plus-sign-alt"></span>
                Create New Table
            </button>
        </div>
    </div>
<table id="resource-container">
    <tr>
        <td>
            <input placeholder="Filter by Name" type="text" class="form-control" data-ng-model="searchText"/><br/>
            <ul id="resource-list" class="list-group">
                <li ng-click="showSchema()" data-ng-class="table.name === currentTable ? 'active' : ''" class="list-group-item"
                    ng-repeat="table in schemaData | filter:searchText" id="row_{{table.name}}">
                    <span class="user-name">{{table.name}}</span>
            <span class="btn-group btn-group-sm">

                                      <button class="btn btn-default" title="Delete this table"
                                              ng-click="delete()"><i
                                              class="icon-trash"></i>
                                      </button>
            </span>


                </li>
            </ul>
        </td>


        <td>&nbsp;</td>
        <td id="app-details" >

            <div>
                    <div id="grid-container">
                        <div class="alert alert-info">
                            <li class="icon-info-sign"></li>
                            &nbsp;Add or Delete fields from your database schema below. The first row is used to add a new field.
                        </div>
                        <div id="schema-main" ng-grid="browseOptions"></div>
                        <input type="checkbox" data-ng-model="show_json">&nbspShow JSON Schema<br/>
                        <div data-ng-show="show_json">
                            <textarea  data-ng-model = "editableSchema" rows="20" cols="50" style="height:300px;"></textarea>
                            <button class="btn btn-primary">Update Schema</button>
                        </div>

                    </div>
                    <div id="create-form">
                        <div class="alert alert-info">
                            <li class="icon-info-sign"></li>
                            &nbsp;Propose table structure and click "Create Table" to save.
                        </div>
                        <div class="section">
                            <span>Table Name:</span><input id="table-name" type="text" ng-model="schema.table.name"/>
                        </div>

                        <div class="alert alert-info">
                            <li class="icon-info-sign"></li>
                            &nbsp;Add fields
                        </div>

                        <div class="section">
                            <span>Field Name:</span><input ng-disabled="!schema.table.name"  type="text" ng-model="schema.table.field.name"/>
                            <br/>
                            <span>Field Type:</span><select  ng-disabled="!schema.table.name || !schema.table.field.name" ng-model="schema.table.field.type">
                            <option value="id">ID / Primary Key</option>
                            <option value="string">String</option>
                            <option value="integer">Integer</option>
                            <option value="text">Text</option>
                            <option value="boolean">Boolean</option>
                            <option value="binary">Binary</option>
                            <option value="float">Float</option>
                            <option value="decimal">Decimal</option>
                            <option value="datetime">Datetime</option>
                            <option value="date">Date</option>
                            <option value="time">Time</option>


                        </select>
                            <br/>
                            <span>Field Size:</span><input ng-disabled="!schema.table.name || !schema.table.field.name || !schema.table.field.type" type="text" ng-model="schema.table.field.size"/>
                            <br/>
                            <span>Allow Null:</span><input ng-disabled="!schema.table.name || !schema.table.field.name || !schema.table.field.type"type="checkbox" ng-model="schema.table.field.allow_null"/><br/>
                            <div><button ng-disabled="!schema.table.name || !schema.table.field.name || !schema.table.field.type" class="btn btn-success" ng-click="addField()">
                                <li class="icon-plus-sign-alt"></li>
                                &nbsp;Add Field</button></div>
                        </div>


                        <div id="fields_container"></div>
                        <table id="field-list" class="table table-hover table-striped">

                            <tbody>

                            <tr ng-repeat="field in newTable.table.field">
                                <td>{{field.name}}</td>
                                <td>{{field.type}}</td>
                                <td>{{field.size}}</td>
                                <td>{{field.allow_null}}</td>
                                <td class="no-border">
                                    <div class="btn-group">

                                        <a class="btn btn-small btn-inverse" ng-click="removeField()"><i
                                                class="icon-trash"></i></a>
                                    </div>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                        <div><button ng-disabled = "!newTable.table.field.length"  class="btn btn-primary" ng-click="create()">
                            <li class="icon-save"></li>
                            &nbsp;Create Table</button></div>
                    </div>



                <div id="json_upload" style="display:none;">
                    <style>
                        body {
                            font-family: sans-serif;
                        }

                        #result {
                            padding: 1em;
                        }

                        .pass {
                            background-color: #efe;
                            color: #393;
                            border: 2px solid #393;
                        }

                        .fail {
                            background-color: #fee;
                            color: #933;
                            border: 2px solid #933;
                        }

                        textarea {
                            width: 100%;
                        }
                    </style>


                    <div class="alert alert-info">Paste your JSON Schema below, Click Validate to use JSONlint before creating.</div>

                    <textarea id="source" rows="20" cols="50"></textarea>

                    <div style="white-space: nowrap" class="form-inline">
                        <button ng-click="validateJSON()" id="button">Validate</button>&nbsp;<input type="checkbox" value="yes" id="reformat"/>
                        <label for="reformat">Reformat JSON?</label>
                    </div>
                    <h2>Results</h2>
                    <pre id="result"></pre>
                    <p>
                        <button class="btn btn-primary" ng-click="postJSON()" class="icon-save"> Create Table(s)</button>
                    </p>
                </div>

            </div>
        </td>
    </tr>
</table>
</div>
